= simple_form_for @task do |f|
  - if @task.errors.any?
    #error_explanation
      %h2= "#{pluralize(@task.errors.count, "error")} prohibited this task from being saved:"
      %ul
        - @task.errors.full_messages.each do |msg|
          %li= msg

  .mb-3
    = f.input :name, label: "Nombre:", input_html: { class: "form-control" }

  .mb-3
    = f.input :description, as: :text, label: "Descripción:", input_html: { class: "form-control" }

  .mb-3
    = f.input :due_date, as: :date, label: "Fecha de vencimiento:", input_html: { class: "form-control" }

  .mb-3
    = f.input :category_id,
              collection: Category.all.map { |c| [c.name, c.id] },
              prompt: "Selecciona una categoría",
              label: "Categoría",
              input_html: { class: "form-select" }

  .mb-3
    %h5 Participantes
    .participants-container
      = f.simple_fields_for :participating_users do |g|
        = render 'participating_user_fields', f: g

    #addParticipants
      = link_to_add_association f, :participating_users,
          'data-association-insertion-node' => '.participants-container',
          'data-turbolinks' => false,
          class: "btn btn-sm btn-outline-primary mt-2" do
        Agregar participante

  .actions.mt-3
    = f.submit "Guardar Tarea", class: "btn btn-success"
